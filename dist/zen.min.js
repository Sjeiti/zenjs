/**
 * A simple function to use Emmet in a web environment
 * @property {Boolean} [firstChild=false] When set to true the result to the zen function is an HTMLElement when the length of the NodeList is one. Default is false.
 * @param {string} abbreviation The Emmet abbreviation to expand.
 * @param {Object} [content] An optional content object to replace strings from the result.
 * @returns {Array} The Emmet result in an Array.
 * @version 0.1.3
 * @author Ron Valstar <ron@ronvalstar.nl>
 * @licence MIT: http://www.opensource.org/licenses/mit-license.php
 * @requires Emmet (currently using revision c973f3d)
 * @copyright Emmet 2012 Sergey Chikuyonok <serge.che@gmail.com>
 */
var zen=function(){var a=function(){var a=this,b=(a._,{}),c=Array.prototype,d=Object.prototype,e=Function.prototype,f=c.slice,g=(c.unshift,d.toString),h=d.hasOwnProperty,i=c.forEach,j=c.map,k=c.reduce,l=(c.reduceRight,c.filter),m=(c.every,c.some,c.indexOf),n=(c.lastIndexOf,Array.isArray),o=Object.keys,p=e.bind,q=function(){return!1};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=q),exports._=q):a._=q,q.VERSION="1.3.3";var r=q.each=q.forEach=function(a,c,d){if(null!=a)if(i&&a.forEach===i)a.forEach(c,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(e in a&&c.call(d,a[e],e,a)===b)return}else for(var g in a)if(q.has(a,g)&&c.call(d,a[g],g,a)===b)return};q.map=q.collect=function(a,b,c){var d=[];return null==a?d:j&&a.map===j?a.map(b,c):(r(a,function(){return!1}),a.length===+a.length&&(d.length=a.length),d)},q.reduce=q.foldl=q.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),k&&a.reduce===k)return d&&(b=q.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(r(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError("Reduce of empty array with no initial value");return c},q.reduceRight=q.foldr=function(){return!1},q.find=q.detect=function(){return!1},q.filter=q.select=function(a,b,c){var d=[];return null==a?d:l&&a.filter===l?a.filter(b,c):(r(a,function(){return!1}),d)},q.reject=function(){return!1},q.every=q.all=function(){return!1};var s=q.some=q.any=function(){return!1};q.include=q.contains=function(a,b){var c=!1;return null==a?c:m&&a.indexOf===m?-1!=a.indexOf(b):c=s(a,function(){return!1})},q.invoke=function(){return!1},q.pluck=function(){return!1},q.max=function(){return!1},q.min=function(){return!1},q.shuffle=function(){return!1},q.sortBy=function(){return!1},q.groupBy=function(){return!1},q.sortedIndex=function(){return!1},q.toArray=function(){return!1},q.size=function(){return!1},q.first=q.head=q.take=function(){return!1},q.initial=function(){return!1},q.last=function(){return!1},q.rest=q.tail=function(a,b,c){return f.call(a,null==b||c?1:b)},q.compact=function(){return!1},q.flatten=function(a,b){return q.reduce(a,function(a,c){return q.isArray(c)?a.concat(b?c:q.flatten(c)):(a[a.length]=c,a)},[])},q.without=function(){return!1},q.uniq=q.unique=function(){return!1},q.union=function(){return!1},q.intersection=q.intersect=function(){return!1},q.difference=function(){return!1},q.zip=function(){return!1},q.indexOf=function(a,b,c){if(null==a)return-1;var d,e;if(c)return d=q.sortedIndex(a,b),a[d]===b?d:-1;if(m&&a.indexOf===m)return a.indexOf(b);for(d=0,e=a.length;e>d;d++)if(d in a&&a[d]===b)return d;return-1},q.lastIndexOf=function(){return!1},q.range=function(){return!1},q.bind=function(a){var b,c;if(a.bind===p&&p)return p.apply(a,f.call(arguments,1));if(!q.isFunction(a))throw new TypeError;return c=f.call(arguments,2),b=function(){return!1}},q.bindAll=function(){return!1},q.memoize=function(){return!1},q.delay=function(){return!1},q.defer=function(){return!1},q.throttle=function(){return!1},q.debounce=function(){return!1},q.once=function(){return!1},q.wrap=function(){return!1},q.compose=function(){return!1},q.after=function(){return!1},q.keys=o||function(){return!1},q.values=function(){return!1},q.functions=q.methods=function(a){var b=[];for(var c in a)q.isFunction(a[c])&&b.push(c);return b.sort()},q.extend=function(a){return r(f.call(arguments,1),function(b){for(var c in b)a[c]=b[c]}),a},q.pick=function(){return!1},q.defaults=function(){return!1},q.clone=function(a){return q.isObject(a)?q.isArray(a)?a.slice():q.extend({},a):a},q.tap=function(){return!1},q.isEqual=function(){return!1},q.isEmpty=function(){return!1},q.isElement=function(){return!1},q.isArray=n||function(){return!1},q.isObject=function(a){return a===Object(a)},q.isArguments=function(a){return"[object Arguments]"==g.call(a)},q.isArguments(arguments)||(q.isArguments=function(){return!1}),q.isFunction=function(a){return"[object Function]"==g.call(a)},q.isString=function(a){return"[object String]"==g.call(a)},q.isNumber=function(a){return"[object Number]"==g.call(a)},q.isFinite=function(){return!1},q.isNaN=function(){return!1},q.isBoolean=function(){return!1},q.isDate=function(){return!1},q.isRegExp=function(){return!1},q.isNull=function(){return!1},q.isUndefined=function(a){return void 0===a},q.has=function(a,b){return h.call(a,b)},q.noConflict=function(){return!1},q.identity=function(){return!1},q.times=function(){return!1},q.escape=function(){return!1},q.result=function(){return!1},q.mixin=function(a){r(q.functions(a),function(b){w(b,q[b]=a[b])})},q.uniqueId=function(){return!1},q.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var t={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var u in t)t[t[u]]=u;q.template=function(){return!1},q.chain=function(){return!1};var v=function(){return!1};q.prototype=v.prototype;var w=function(a){v.prototype[a]=function(){return!1}};return q.mixin(q),r(["pop","push","reverse","shift","sort","splice","unshift"],function(a){c[a],v.prototype[a]=function(){return!1}}),r(["concat","join","slice"],function(a){c[a],v.prototype[a]=function(){return!1}}),v.prototype.chain=function(){return!1},v.prototype.value=function(){return!1},q}.call({}),b=function(b){function c(a){return a in f||!g||g(a),f[a]}var d="html";if("undefined"==typeof a)try{a=b[["require"][0]]("underscore")}catch(e){}if("undefined"==typeof a)throw"Cannot access to Underscore.js lib";var f={_:a},g=null;return{define:function(b,c){b in f||(f[b]=a.isFunction(c)?this.exec(c):c)},require:c,exec:function(d,e){return d.call(e||b,a.bind(c,this),a,this)},extend:function(){return!1},expandAbbreviation:function(a,b,e,f){if(!a)return"";b=b||d;var g=c("filters"),h=c("abbreviationParser");e=c("profile").get(e,b),c("tabStops").resetTabstopIndex();var i=g.extractFromAbbreviation(a),j=h.parse(i[0],{syntax:b,contextNode:f}),k=g.composeList(b,e,i[1]);return g.apply(j,k,e),j.toString()},defaultSyntax:function(){return!1},defaultProfile:function(){return!1},log:function(){return!1},setModuleLoader:function(){return!1}}}(this);"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=b),exports.emmet=b),"undefined"!=typeof define&&define(b),b.define("abbreviationParser",function(a,b){function c(){this.parent=null,this.children=[],this._attributes=[],this.abbreviation="",this.counter=1,this._name=null,this._text="",this.repeatCount=1,this.hasImplicitRepeat=!1,this._data={},this.start="",this.end="",this.content="",this.padding=""}function d(a){return a.substring(1,a.length-1)}function e(a,b){for(var c;c=a.next();)if(c===b)return!0;return!1}function f(e){e=a("utils").trim(e);for(var g,h,i=new c,j=i.addChild(),k=a("stringStream").create(e),l=1e3;!k.eol()&&--l>0;)switch(g=k.peek()){case"(":if(k.start=k.pos,!k.skipToPair("(",")"))throw'Invalid abbreviation: mo matching ")" found for character at '+k.pos;var n=f(d(k.current()));(h=k.match(/^\*(\d+)?/,!0))&&j._setRepeat(h[1]),b.each(n.children,function(a){j.addChild(a)});break;case">":j=j.addChild(),k.next();break;case"+":j=j.parent.addChild(),k.next();break;case"^":var o=j.parent||j;j=(o.parent||o).addChild(),k.next();break;default:k.start=k.pos,k.eatWhile(function(a){if("["==a||"{"==a){if(k.skipToPair(a,p[a]))return k.backUp(1),!0;throw'Invalid abbreviation: mo matching "'+p[a]+'" found for character at '+k.pos}if("+"==a){k.next();var b=k.eol()||~"+>^*".indexOf(k.peek());return k.backUp(1),b}return"("!=a&&m(a)}),j.setAbbreviation(k.current()),k.start=k.pos}if(1>l)throw"Endless loop detected";return i}function g(b){b=a("utils").trim(b);var c=[],d=a("stringStream").create(b);for(d.eatSpace();!d.eol()&&(d.start=d.pos,d.eatWhile(o));){var f=d.current(),g="";if("="==d.peek()){d.next(),d.start=d.pos;var h=d.peek();if('"'==h||"'"==h){if(d.next(),!e(d,h))throw"Invalid attribute value";g=d.current(),g=g.substring(1,g.length-1)}else{if(!d.eatWhile(/[^\s\]]/))throw"Invalid attribute value";g=d.current()}}c.push({name:f,value:g}),d.eatSpace()}return c}function h(b){for(var c=[],e={"#":"id",".":"class"},f=null,h=a("stringStream").create(b);!h.eol();)switch(h.peek()){case"#":case".":null===f&&(f=h.pos);var j=e[h.peek()];h.next(),h.start=h.pos,h.eatWhile(o),c.push({name:j,value:h.current()});break;case"[":if(null===f&&(f=h.pos),h.start=h.pos,!h.skipToPair("[","]"))throw"Invalid attribute set definition";c=c.concat(g(d(h.current())));break;default:h.next()}return c.length?{element:b.substring(0,f),attributes:i(c)}:null}function i(a){a=b.map(a,function(a){return b.clone(a)});var c={};return b.filter(a,function(a){if(!(a.name in c))return c[a.name]=a;var b=c[a.name];return"class"==a.name.toLowerCase()?b.value+=(b.value.length?" ":"")+a.value:b.value=a.value,!1})}function j(b){if(!~b.indexOf("{"))return null;for(var c=a("stringStream").create(b);!c.eol();)switch(c.peek()){case"[":case"(":c.skipToPair(c.peek(),p[c.peek()]);break;case"{":return c.start=c.pos,c.skipToPair("{","}"),{element:b.substring(0,c.start),text:d(c.current())};default:c.next()}}function k(a){for(var c,d,e,f=a.children.length-1;f>=0;f--)if(d=a.children[f],d.isRepeating())for(e=c=d.repeatCount,d.repeatCount=1,d.updateProperty("counter",1),d.updateProperty("maxCount",e);--c>0;)d.parent.addChild(d.clone(),f+1).updateProperty("counter",c+1).updateProperty("maxCount",e);return b.each(a.children,k),a}function l(a){for(var c=a.children.length-1;c>=0;c--){var d=a.children[c];d.isGroup()?d.replace(l(d).children):d.isEmpty()&&d.remove()}return b.each(a.children,l),a}function m(a){var b=a.charCodeAt(0),c="#.*:$-_!@|%";return b>64&&91>b||b>96&&123>b||b>47&&58>b||-1!=c.indexOf(a)}var n=/^[\w\-\$\:@\!%]+\+?$/i,o=/[\w\-:\$@]/,p={"[":"]","(":")","{":"}"},q=Array.prototype.splice,r=[],s=[],t=[];return c.prototype={addChild:function(a,d){return a=a||new c,a.parent=this,b.isUndefined(d)?this.children.push(a):this.children.splice(d,0,a),a},clone:function(){var a=new c,d=["abbreviation","counter","_name","_text","repeatCount","hasImplicitRepeat","start","end","content","padding"];return b.each(d,function(b){a[b]=this[b]},this),a._attributes=b.map(this._attributes,function(a){return b.clone(a)}),a._data=b.clone(this._data),a.children=b.map(this.children,function(b){return b=b.clone(),b.parent=a,b}),a},remove:function(){return!1},replace:function(){var a=this.parent,c=b.indexOf(a.children,this),d=b.flatten(arguments);q.apply(a.children,[c,1].concat(d)),b.each(d,function(b){b.parent=a})},updateProperty:function(a,c){return this[a]=c,b.each(this.children,function(b){b.updateProperty(a,c)}),this},find:function(){return!1},findAll:function(){return!1},data:function(b,c){return 2==arguments.length&&(this._data[b]=c,"resource"==b&&a("elements").is(c,"snippet")&&(this.content=c.data,this._text&&(this.content=a("abbreviationUtils").insertChildContent(c.data,this._text)))),this._data[b]},name:function(){var b=this.matchedResource();return a("elements").is(b,"element")?b.name:this._name},attributeList:function(){var c=[],d=this.matchedResource();return a("elements").is(d,"element")&&b.isArray(d.attributes)&&(c=c.concat(d.attributes)),i(c.concat(this._attributes))},attribute:function(){return!1},matchedResource:function(){return this.data("resource")},index:function(){return!1},_setRepeat:function(a){a?this.repeatCount=parseInt(a,10)||1:this.hasImplicitRepeat=!0},setAbbreviation:function(a){a=a||"";var b=this;a=a.replace(/\*(\d+)?$/,function(a,c){return b._setRepeat(c),""}),this.abbreviation=a;var c=j(a);c&&(a=c.element,this.content=this._text=c.text);var d=h(a);if(d&&(a=d.element,this._attributes=d.attributes),this._name=a,this._name&&!n.test(this._name))throw"Invalid abbreviation"},toString:function(){var c=a("utils"),d=this.start,e=this.end,f=this.content,g=this;b.each(t,function(a){d=a(d,g,"start"),f=a(f,g,"content"),e=a(e,g,"end")});var h=b.map(this.children,function(a){return a.toString()}).join("");return f=a("abbreviationUtils").insertChildContent(f,h,{keepVariable:!1}),d+c.padString(f,this.padding)+e},hasEmptyChildren:function(){return!1},hasImplicitName:function(){return!1},isGroup:function(){return!this.abbreviation},isEmpty:function(){return!this.abbreviation&&!this.children.length},isRepeating:function(){return this.repeatCount>1||this.hasImplicitRepeat},isTextNode:function(){return!this.name()&&!this.attributeList().length},isElement:function(){return!1},deepestChild:function(){return!1}},t.push(function(b,c){return a("utils").replaceCounter(b,c.counter,c.maxCount)}),{parse:function(a,c){c=c||{};var d=f(a);return c.contextNode&&(d._name=c.contextNode.name,b.each(d._attributes,function(){return!1}),b.each(c.contextNode.attributes,function(){return!1})),b.each(r,function(){return!1}),d=l(k(d)),b.each(s,function(){return!1}),d},AbbreviationNode:c,addPreprocessor:function(){return!1},removeFilter:function(){return!1},addPostprocessor:function(){return!1},removePostprocessor:function(){return!1},addOutputProcessor:function(a){b.include(t,a)||t.push(a)},removeOutputProcessor:function(){return!1},isAllowedChar:function(){return!1}}}),b.define("utils",function(a,b){function c(a){this._data=[],this.length=0,a&&this.append(a)}return c.prototype={append:function(a){this._data.push(a),this.length+=a.length},toString:function(){return this._data.join("")},valueOf:function(){return!1}},{reTag:/<\/?[\w:\-]+(?:\s+[\w\-:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*\s*(\/?)>$/,endsWithTag:function(){return!1},isNumeric:function(a){return"string"==typeof a&&(a=a.charCodeAt(0)),a&&a>47&&58>a},trim:function(a){return(a||"").replace(/^\s+|\s+$/g,"")},getNewline:function(){var c=a("resources");if(!c)return"\n";var d=c.getVariable("newline");return b.isString(d)?d:"\n"},setNewline:function(){return!1},splitByLines:function(a,c){var d=this.getNewline(),e=(a||"").replace(/\r\n/g,"\n").replace(/\n\r/g,"\n").replace(/\r/g,"\n").replace(/\n/g,d).split(d);return c&&(e=b.filter(e,function(){return!1},this)),e},normalizeNewline:function(){return!1},repeatString:function(){return!1},getStringsPads:function(){return!1},padString:function(c,d){var e=b.isNumber(d)?this.repeatString(a("resources").getVariable("indentation")||"	",d):d,f=[],g=this.splitByLines(c),h=this.getNewline();f.push(g[0]);for(var i=1;i<g.length;i++)f.push(h+e+g[i]);return f.join("")},zeroPadString:function(a,b){for(var c="",d=a.length;b>d++;)c+="0";return c+a},unindentString:function(){return!1},replaceUnescapedSymbol:function(a,c,d){for(var e=0,f=a.length,g=c.length,h=0;f>e;)if("\\"==a.charAt(e))e+=g+1;else if(a.substr(e,g)==c){var i=g;h++;var j=d;if(b.isFunction(d)){var k=d(a,c,e,h);k?(i=k[0].length,j=k[1]):j=!1}if(j===!1){e++;continue}a=a.substring(0,e)+j+a.substring(e+i),f=a.length,e+=j.length}else e++;return a},replaceVariables:function(c,d){return d=d||{},b.isFunction(d)?d:function(){return!1},a("resources"),a("tabStops").processText(c,{variable:function(){return!1}})},replaceCounter:function(a,c,d){var e="$";a=String(a),c=String(c),/^\-?\d+$/.test(c)&&(c=+c);var f=this;return this.replaceUnescapedSymbol(a,e,function(a,e,g){if("{"==a.charAt(g+1)||f.isNumeric(a.charAt(g+1)))return!1;for(var h=g+1;"$"==a.charAt(h)&&"{"!=a.charAt(h+1);)h++;var i,j=h-g,k=0,l=!1;return(i=a.substr(h).match(/^@(\-?)(\d*)/))&&(h+=i[0].length,i[1]&&(l=!0),k=parseInt(i[2]||1)-1),l&&d&&b.isNumber(c)&&(c=d-c+1),c+=k,[a.substring(g,h),f.zeroPadString(c+"",j)]})},matchesTag:function(){return!1},escapeText:function(){return!1},unescapeText:function(){return!1},getCaretPlaceholder:function(){return!1},setCaretPlaceholder:function(){return!1},getLinePadding:function(){return!1},getLinePaddingFromPosition:function(){return!1},escapeForRegexp:function(){return!1},prettifyNumber:function(){return!1},stringBuilder:function(a){return new c(a)},replaceSubstring:function(a,c,d,e){return b.isObject(d)&&"end"in d&&(e=d.end,d=d.start),b.isString(e)&&(e=d+e.length),b.isUndefined(e)&&(e=d),0>d||d>a.length?a:a.substring(0,d)+c+a.substring(e)},narrowToNonSpace:function(){return!1},findNewlineBounds:function(){return!1},deepMerge:function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length;for(b.isObject(h)||b.isFunction(h)||(h={});j>i;i++)if(null!=(a=arguments[i]))for(c in a)d=h[c],e=a[c],h!==e&&(e&&(b.isObject(e)||(f=b.isArray(e)))?(f?(f=!1,g=d&&b.isArray(d)?d:[]):g=d&&b.isObject(d)?d:{},h[c]=this.deepMerge(g,e)):void 0!==e&&(h[c]=e));return h}}}),b.define("handlerList",function(){function a(){this._list=[]}return a.prototype={add:function(){return!1},remove:function(){return!1},list:function(){return!1},listFn:function(){return!1},exec:function(){return!1}},{create:function(){return new a}}}),b.define("stringStream",function(){function a(a){this.pos=this.start=0,this.string=a}return a.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return!1},peek:function(){return this.string.charAt(this.pos)},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(a){var b,c=this.string.charAt(this.pos);return b="string"==typeof a?c==a:c&&(a.test?a.test(c):a(c)),b?(++this.pos,c):void 0},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){return!1},skipTo:function(){return!1},skipToPair:function(a,b){for(var c,d=0,e=this.pos,f=this.string.length;f>e;)if(c=this.string.charAt(e++),c==a)d++;else if(c==b&&(d--,1>d))return this.pos=e,!0;return!1},backUp:function(a){this.pos-=a},match:function(a,b,c){if("string"!=typeof a){var d=this.string.slice(this.pos).match(a);return d&&b!==!1&&(this.pos+=d[0].length),d}var e=c?function(){return!1}:function(){return!1};return e(this.string).indexOf(e(a),this.pos)==this.pos?(b!==!1&&(this.pos+=a.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},{create:function(b){return new a(b)}}}),b.define("resources",function(a,b){var c={},d={},e={};return a("handlerList").create(),{setVocabulary:function(){return!1},getVocabulary:function(){return!1},getMatchedResource:function(){return!1},getVariable:function(a){return(this.getSection("variables")||{})[a]},setVariable:function(){return!1},hasSyntax:function(){return!1},addResolver:function(){return!1},removeResolver:function(){return!1},getSection:function(f){if(!f)return null;f in c||(c[f]=a("utils").deepMerge({},d[f],e[f]));for(var g,h=c[f],i=b.rest(arguments);h&&(g=i.shift());){if(!(g in h))return null;h=h[g]}return h},findItem:function(a,b){for(var c=this.getSection(a);c;){if(b in c)return c[b];c=this.getSection(c["extends"])}},findSnippet:function(){return!1},fuzzyFindSnippet:function(){return!1},getAllSnippets:function(){return!1}}}),b.define("profile",function(a,b){function c(a){b.extend(this,h,a)}function d(a,b){switch(String(b||"").toLowerCase()){case"lower":return a.toLowerCase();case"upper":return a.toUpperCase()}return a}function e(a,b){return g[a.toLowerCase()]=new c(b)}function f(){e("xhtml"),e("html",{self_closing_tag:!1}),e("xml",{self_closing_tag:!0,tag_nl:!0}),e("plain",{tag_nl:!1,indent:!1,place_cursor:!1}),e("line",{tag_nl:!1,indent:!1,extraFilters:"s"})}var g={},h={tag_case:"asis",attr_case:"asis",attr_quotes:"double",tag_nl:"decide",tag_nl_leaf:!1,place_cursor:!0,indent:!0,inline_break:3,self_closing_tag:"xhtml",filters:"",extraFilters:""};return c.prototype={tagName:function(a){return d(a,this.tag_case)},attributeName:function(a){return d(a,this.attr_case)},attributeQuote:function(){return"single"==this.attr_quotes?"'":'"'},selfClosing:function(){return!1},cursor:function(){return this.place_cursor?a("utils").getCaretPlaceholder():""}},f(),{create:function(){return!1},get:function(d,e){if(!d&&e){var f=a("resources").findItem(e,"profile");f&&(d=f)}return d?d instanceof c?d:b.isString(d)&&d.toLowerCase()in g?g[d.toLowerCase()]:this.create(d):g.plain},remove:function(){return!1},reset:function(){return!1},stringCase:d}}),b.define("abbreviationUtils",function(a,b){return{isSnippet:function(){return!1},isUnary:function(a){if(a.children.length||a._text||this.isSnippet(a))return!1;var b=a.matchedResource();return b&&b.is_empty},isInline:function(){return!1},isBlock:function(){return!1},isSnippet:function(b){return a("elements").is(b.matchedResource(),"snippet")},hasTagsInContent:function(){return!1},hasBlockChildren:function(){return!1},insertChildContent:function(c,d,e){e=b.extend({keepVariable:!0,appendIfNoChild:!0},e||{});var f=!1,g=a("utils");return c=g.replaceVariables(c,function(){return!1}),!f&&e.appendIfNoChild&&(c+=d),c}}}),b.define("htmlMatcher",function(){return{find:function(){return!1},tag:function(){return!1}}}),b.define("tabStops",function(a,b){var c=100,d=0,e={replaceCarets:!1,escape:function(){return!1},tabstop:function(){return!1},variable:function(){return!1}};return a("abbreviationParser").addOutputProcessor(function(b,c){var e=0,f=a("tabStops"),g=a("utils"),h={tabstop:function(){return!1}};return b=f.processText(b,h),b=g.replaceVariables(b,f.variablesResolver(c)),d+=e+1,b}),{extract:function(){return!1},processText:function(c,d){d=b.extend({},e,d);for(var f,g,h,i=a("utils").stringBuilder(),j=a("stringStream").create(c);f=j.next();)if("\\"!=f||j.eol()){if(h=f,"$"==f)if(j.start=j.pos-1,g=j.match(/^[0-9]+/))h=d.tabstop({start:i.length,group:j.current().substr(1),token:j.current()});else if(g=j.match(/^\{([a-z_\-][\w\-]*)\}/))h=d.variable({start:i.length,name:g[1],token:j.current()});else if(g=j.match(/^\{([0-9]+)(:.+?)?\}/,!1)){j.skipToPair("{","}");var k={start:i.length,group:g[1],token:j.current()},l=k.token.substring(k.group.length+2,k.token.length-1);l&&(k.placeholder=l.substr(1)),h=d.tabstop(k)}i.append(h)}else i.append(d.escape(j.next()));return i.toString()},upgrade:function(){return!1},variablesResolver:function(){return a("resources"),function(){return!1}},resetTabstopIndex:function(){d=0,c=100}}}),b.define("preferences",function(a,b){function c(a){return b.isObject(a)&&"value"in a&&b.keys(a).length<3}var d={},e={};return{define:function(a,d,f){var g=a;b.isString(a)&&(g={},g[a]={value:d,description:f}),b.each(g,function(a,b){e[b]=c(a)?a:{value:a}})},set:function(){return!1},get:function(a){return a in d?d[a]:a in e?e[a].value:void 0},getArray:function(c){var d=this.get(c);return b.isUndefined(d)||(d=b.map(d.split(","),a("utils").trim),d.length||(d=null)),d},getDict:function(){return!1},description:function(){return!1},remove:function(){return!1},list:function(){return!1},load:function(){return!1},exportModified:function(){return!1},reset:function(){return!1},_startTest:function(){return!1},_stopTest:function(){return!1}}}),b.define("elements",function(){function a(){return!1}var b={},c={add:function(a){b[a]=function(){return!1}},get:function(){return!1},create:function(){return!1},is:function(a,b){return a&&a.type===b}};return c.add("element",function(){return!1}),c.add("snippet",a),c.add("reference",a),c.add("empty",function(){return!1}),c}),b.define("filters",function(a,b){function c(a){return a?b.isString(a)?a.split(/[\|,]/g):a:[]}var d={},e="html";return{add:function(a,b){d[a]=b},apply:function(e,f,g){var h=a("utils");return g=a("profile").get(g),b.each(c(f),function(a){var b=h.trim(a.toLowerCase());b&&b in d&&(e=d[b](e,g))}),e},composeList:function(b,d,f){d=a("profile").get(d);var g=c(d.filters||a("resources").findItem(b,"filters")||e);return d.extraFilters&&(g=g.concat(c(d.extraFilters))),f&&(g=g.concat(c(f))),g&&g.length||(g=c(e)),g},extractFromAbbreviation:function(a){var b="";return a=a.replace(/\|([\w\|\-]+)$/,function(){return!1}),[a,c(b)]}}}),b.exec(function(a,b){function c(c){return b.include(l.getArray("format.noIndentTags")||[],c.name())?"":a("resources").getVariable("indentation")}function d(){return!1}function e(){return!1}function f(){return!1}function g(){return!1}function h(){return!1}function i(){return!1}function j(h,j){h.start=h.end=k;var m=a("utils"),n=a("abbreviationUtils"),o=n.isUnary(h),p=m.getNewline(),q=c(h);if(j.tag_nl!==!1){var r=j.tag_nl===!0&&(j.tag_nl_leaf||h.children.length);r||(r=b.include(l.getArray("format.forceIndentationForTags")||[],h.name())),h.isTextNode()||(f(h,j)?(e(h)||n.isSnippet(h.parent)&&!h.index()||(h.start=p+h.start),(n.hasBlockChildren(h)||g(h,j)||r&&!o)&&(h.end=p+h.end),(n.hasTagsInContent(h)||r&&!h.children.length&&!o)&&(h.start+=p+q)):n.isInline(h)&&d(h)&&!e(h)?h.start=p+h.start:n.isInline(h)&&i(h,j)&&(h.end=p+h.end),h.padding=q)}return h}var k="%s",l=a("preferences");l.define("format.noIndentTags","html","A comma-separated list of tag names that should not get inner indentation."),l.define("format.forceIndentationForTags","body","A comma-separated list of tag names that should <em>always</em> get inner indentation."),a("filters").add("_format",function m(c,d,e){e=e||0;var f=a("abbreviationUtils");return b.each(c.children,function(a){f.isSnippet(a)?h(a,d,e):j(a,d,e),m(a,d,e+1)}),c})}),b.exec(function(a,b){function c(a,c){var d=c.attributeQuote(),e=c.cursor();return b.map(a.attributeList(),function(a){var b=c.attributeName(a.name);return" "+b+"="+d+(a.value||e)+d}).join("")}function d(b,d){if(!b.parent)return b;var e=a("abbreviationUtils"),f=a("utils"),g=c(b,d),h=d.cursor(),i=e.isUnary(b),j="",k="";if(!b.isTextNode()){var l=d.tagName(b.name());i?(j="<"+l+g+d.selfClosing()+">",b.end=""):(j="<"+l+g+">",k="</"+l+">")}var m="%s";return b.start=f.replaceSubstring(b.start,j,b.start.indexOf(m),m),b.end=f.replaceSubstring(b.end,k,b.end.indexOf(m),m),b.children.length||i||~b.content.indexOf(h)||a("tabStops").extract(b.content).tabstops.length||(b.start+=h),b}a("filters").add("html",function e(c,f,g){g=g||0;var h=a("abbreviationUtils");return g||(c=a("filters").apply(c,"_format",f)),b.each(c.children,function(a){h.isSnippet(a)||d(a,f,g),e(a,f,g+1)}),c})});var c=function(a){"use strict";var b=document.createElement("div"),c=b.childNodes,d=function(e,f){var g,h,i=[],j=a.expandAbbreviation(e);if(void 0!==f)for(var k in f){var l=f[k];if(l instanceof Array)for(g=l.length;g>=0;g--)j=j.replace(new RegExp(k+(g+1),"g"),l[g]);else j=j.replace(new RegExp(k,"g"),l)}if(b.innerHTML=j,h=c.length,d.firstChild&&1===h)i=b.firstChild;else for(g=0;h>g;g++)i.push(c[g]);return i};return d.firstChild=!1,d.exposeEmmet=function(){return a},d}(b);return c}();